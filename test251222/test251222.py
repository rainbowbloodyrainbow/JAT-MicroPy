# #ä»»åŠ¡ä¸€ï¼šå¤ä¹ å‘¼å¸ç¯
# import time
# from machine import Pin, PWM
# led_pwm = PWM(Pin(14),freq = 500)

# duty = 0
# step = 10
# delay = 0.02
# while True:
#     for duty in range(0,1024,step):
#         led_pwm.duty(duty)
#         time.sleep(delay)
#         if duty == 1023:
#             print("æœ€äº®")
#     for duty in range(1023,-1,-step):
#         pwm.duty(duty)
#         time.sleep(delay)
#         if duty == 0:
#             print("æœ€æš—")














# #ä»»åŠ¡äºŒï¼špwmæ§åˆ¶èˆµæœº
# import machine
# import time

# pwm = machine.PWM(machine.Pin(15), freq=50)#èˆµæœºçš„é¢‘ç‡ä¸º50Hzï¼Œè¿™æ˜¯èˆµæœºé€šä¿¡åè®®è§„å®šçš„
# def set_servo_angle(angle):
#     if 0 <= angle <= 180:
#         duty_ns = int(500000 + (angle / 180) * 200000)
#         pwm.duty_ns(duty_ns)#wokwiä¸­ä½¿ç”¨nsæ¥è®¾å®šè„‰å†²å®½åº¦ï¼Œ500000nså¯¹åº”0åº¦ï¼Œ2500000nså¯¹åº”180åº¦
# print("åˆå§‹åŒ–èˆµæœºåˆ°0åº¦")#ç¨‹åºå¼€å§‹æ—¶ï¼Œä¸åªæ˜¯èˆµæœºï¼ŒåŠ¡å¿…æŠŠled,ç»§ç”µå™¨ï¼Œç”µæœºç­‰æ‰§è¡Œå™¨ä»¶åˆå§‹åŒ–åˆ°ä¸€ä¸ªå®‰å…¨çŠ¶æ€
# set_servo_angle(0)
# time.sleep(1)
# while True:
#     print("Turning to 90 degrees")
#     set_servo_angle(90)
#     time.sleep(2)
#     print("Turning to 180 degrees")
#     set_servo_angle(135)
#     time.sleep(2)

# #ä»¥ä¸Šç¨‹åºæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ




# #è¿™æ˜¯è€å¸ˆç»™çš„ä»£ç 
# import machine
# import time

# # ----- 1ï¼šé€‚é…ESP32 PWMå¼•è„š-----
# # ESP32 D15æ”¯æŒPWMåŠŸèƒ½
# pwm = machine.PWM(machine.Pin(15),freq=50)
# # è®¾ç½®PWMé¢‘ç‡ä¸º50Hzï¼ˆä¼ºæœç”µæœºæ ‡å‡†é¢‘ç‡ï¼‰

# # ----- æ ¸å¿ƒé€»è¾‘ï¼šä¼ºæœç”µæœºè§’åº¦æ§åˆ¶å‡½æ•°-----
# def set_servo_angle(angle):
#     if 0 <= angle <= 180:
#         # å°†è§’åº¦(0-180)æ˜ å°„åˆ°è„‰å†²å®½åº¦(500k-2.5Mçº³ç§’)ï¼Œé€‚é…Wokwièˆµæœºç‰¹æ€§
#         duty_ns = int(500000 + (angle / 180) * 2000000)
#         pwm.duty_ns(duty_ns)
# # ----- å…³é”®ä¿®æ­£ï¼šåˆå§‹åŒ–ä½ç½®-----
# # ç¡®ä¿ç”µæœºå¯åŠ¨åæœ‰æ˜ç¡®ä½ç½®
# print("åˆå§‹åŒ–ä½ç½®ï¼šå…³é—­ (0åº¦)")
# set_servo_angle(0)
# time.sleep(1) # ç­‰å¾…1ç§’ï¼Œç¡®ä¿ç”µæœºåˆ°ä½

# # ----- ä¸»å¾ªç¯ï¼šå¼€å…³æµ‹è¯•-----
# while True:
#     print("å¼€å¯ (90åº¦)")
#     set_servo_angle(135)
#     time.sleep(2)
    
#     print("å…³é—­ (0åº¦)")
#     set_servo_angle(0)
#     time.sleep(2)














# #ä»»åŠ¡ä¸‰ï¼šä¸²å£æ§åˆ¶èˆµæœºå’ŒLED
# import sys
# import time
# import machine

# # ----- å…³é”®ä¿®æ”¹1ï¼šé€‚é…ESP32ç¡¬ä»¶å¼•è„š-----
# print("Initializing hardware...")
# # LEDï¼šESP32ç”¨D15ï¼Œè¾“å‡ºæ¨¡å¼
# led = machine.Pin(15, machine.Pin.OUT)
# led.off()  # åˆå§‹çŠ¶æ€å…³é—­

# # ä¼ºæœç”µæœºï¼šESP32ç”¨D2ï¼ŒPWMæ¨¡å¼ï¼ˆé¢‘ç‡50Hzï¼Œä¸åŸä»£ç ä¸€è‡´ï¼‰
# servo_pwm = machine.PWM(machine.Pin(2))
# servo_pwm.freq(50)

# # ----- æ ¸å¿ƒå‡½æ•°ï¼šä¼ºæœç”µæœºè§’åº¦æ§åˆ¶-----
# def set_servo_angle(angle):
#     """è®¾ç½®ä¼ºæœç”µæœºè§’åº¦ï¼ˆ0-180åº¦ï¼‰"""
#     if 0 <= angle <= 180:
#         # æ˜ å°„è§’åº¦åˆ°è„‰å†²å®½åº¦ï¼ˆ500k-2.5Mçº³ç§’ï¼Œé€‚é…èˆµæœºæ ‡å‡†ï¼‰
#         duty_ns = int(500000 + (angle / 180) * 2000000)
#         servo_pwm.duty_ns(duty_ns)
#         print(f"ä¼ºæœç”µæœºå·²è½¬åˆ° {angle} åº¦")
#     else:
#         print("é”™è¯¯: è§’åº¦å¿…é¡»åœ¨0-180ä¹‹é—´")

# # ----- ä¸»ç¨‹åºï¼šä¸²å£æŒ‡ä»¤è§£æ-----
# print("è¿œç¨‹å‘½ä»¤è§£æå™¨å·²å°±ç»ªã€‚")
# print("å¯ç”¨æŒ‡ä»¤: 'led on', 'led off', 'servo:è§’åº¦å€¼'")
# set_servo_angle(0)  # ä¼ºæœç”µæœºåˆå§‹ä½ç½®ï¼ˆä¸åŸä»£ç ä¸€è‡´ï¼‰

# while True:
#     # è¯»å–ä¸²å£è¾“å…¥æŒ‡ä»¤
#     command = sys.stdin.readline()
    
#     if command:
#         # æ¸…ç†æŒ‡ä»¤ï¼ˆå»é™¤ç©ºæ ¼ã€è½¬ä¸ºå°å†™ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼‰
#         clean_command = command.strip().lower()
#         print(f"\næ”¶åˆ°æŒ‡ä»¤: '{clean_command}'")
        
#         # è§£æLEDæ§åˆ¶æŒ‡ä»¤
#         if clean_command == "led on":
#             led.on()
#             print("LEDå·²ç‚¹äº®")
#         elif clean_command == "led off":
#             led.off()
#             print("LEDå·²ç†„ç­")
            
#         # è§£æä¼ºæœç”µæœºæ§åˆ¶æŒ‡ä»¤ï¼ˆæ ¼å¼ï¼šservo:è§’åº¦å€¼ï¼‰
#         elif clean_command.startswith("servo:"):
#             try:
#                 parts = clean_command.split(':')
#                 angle_value = int(parts[1])
#                 set_servo_angle(angle_value)
#             except (IndexError, ValueError):
#                 print("é”™è¯¯: servoæŒ‡ä»¤æ ¼å¼ä¸æ­£ç¡®ï¼Œåº”ä¸º 'servo:è§’åº¦å€¼'")
        
#         # æœªçŸ¥æŒ‡ä»¤å¤„ç†
#         else:
#             print(f"æœªçŸ¥æŒ‡ä»¤: '{clean_command}'")









#ä»»åŠ¡å››ï¼šåŠ ä¸ŠæŒ‰é”®æ§åˆ¶
#å¾…å®Œæˆâ€¦â€¦
















#ä»»åŠ¡äº”ï¼šå¯†ç é”
#å¾…å®Œæˆâ€¦â€¦





















# #ä»»åŠ¡å…­ï¼šæ— æºèœ‚é¸£å™¨
# #æœ‰æºèœ‚é¸£å™¨å†…éƒ¨è‡ªå¸¦æŒ¯è¡ç”µè·¯ï¼Œåªéœ€æ¥é€šç”µæºå³å¯å‘å£°ï¼Œä½†ç¼ºç‚¹æ˜¯åªèƒ½å‘å‡ºå›ºå®šé¢‘ç‡çš„å£°éŸ³ã€‚
# #æ— æºèœ‚é¸£å™¨å¯ä»¥é€šè¿‡æ”¹å˜è¾“å…¥çš„é¢‘ç‡æ¥å‘å‡ºä¸åŒéŸ³é«˜çš„å£°éŸ³ï¼Œæ›´åŠ çµæ´»ï¼Œé€‚åˆåšç®€å•çš„éŸ³ä¹æ’­æ”¾ã€‚
# from machine import Pin, PWM  # æŒ‰éœ€å¯¼å…¥Pinå’ŒPWMï¼Œæ— éœ€machine.å‰ç¼€
# import utime  

# # å°† GPIO15 è®¾ç½®ä¸ºPWMè¾“å‡ºå¼•è„š
# buzzer_pin = Pin(4)
# buzzer = PWM(buzzer_pin)

# éŸ³ç¬¦é¢‘ç‡è¡¨ (å•ä½ï¼šèµ«å…¹ Hz)
# # è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„éŸ³é˜¶ï¼ŒC4å°±æ˜¯ä¸­å¤®C (Do)
# NOTE_C4 = 262
# NOTE_D4 = 294
# NOTE_E4 = 330
# NOTE_F4 = 349
# NOTE_G4 = 392
# # ... æ›´å¤šéŸ³ç¬¦



# def play_tone(frequency):
#     """ä»¥æŒ‡å®šé¢‘ç‡æ’­æ”¾å£°éŸ³"""
#     if frequency > 0:
#         buzzer.freq(frequency)    # è®¾ç½®é¢‘ç‡ï¼ˆéŸ³é«˜ï¼‰
#         buzzer.duty_u16(32768)  # è®¾ç½®å ç©ºæ¯”ï¼ˆéŸ³é‡ï¼‰ï¼Œä¸€åŠå ç©ºæ¯”é€šå¸¸éŸ³é‡æœ€å¤§
#     else:
#         stop_tone()

# def stop_tone():
#     """åœæ­¢å‘å£°"""
#     buzzer.duty_u16(0) # å°†å ç©ºæ¯”è®¾ä¸º0å³å¯é™éŸ³

# # --- æµ‹è¯• ---
# while True:
#     print("Playing Do (C4)")
#     play_tone(NOTE_C4)
#     utime.sleep(0.5) # æŒç»­0.5ç§’ï¼ˆæ›¿æ¢time.sleepä¸ºutime.sleepï¼‰
#     stop_tone()
#     utime.sleep(0.5)

#     print("Playing Re (D4)")
#     play_tone(NOTE_D4)
#     utime.sleep(0.5)
#     stop_tone()
#     utime.sleep(0.5)
    
#     print("Playing Mi (E4)")
#     play_tone(NOTE_E4)
#     utime.sleep(0.5)
#     stop_tone()
#     utime.sleep(0.5)







# #ä»»åŠ¡ä¸ƒï¼šæ’­æ”¾ç®€å•ä¹æ›²
# #---------------------------------------------------------
# from machine import Pin, PWM  # æŒ‰éœ€å¯¼å…¥Pinå’ŒPWM 
# import utime   

# # ----- ESP32 PWMå¼•è„šï¼ˆD15ï¼‰ -----
# buzzer = PWM(Pin(4))  

# # ----- æ ¸å¿ƒä¹è°±æ•°æ®-----
# #ç”¨å­—å…¸æ¥å°è£…ä¹è°±ï¼Œå¥½å¤„æ˜¯æ•°æ®ä¸é€»è¾‘åˆ†ç¦»ï¼Œæ›´æ¢ä¹è°±æ—¶åªéœ€ä¿®æ”¹æ•°æ®éƒ¨åˆ†ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€æƒ³ä¹‹ä¸€
# NOTES = {
#     'C4': 262, 'D4': 294, 'E4': 330, 'F4': 349, 
#     'G4': 392, 'A4': 440, 'B4': 494, 'C5': 523,
#     'REST': 0  # RESTä»£è¡¨ä¼‘æ­¢ç¬¦
# }

# # # æ­Œæ›²æ—‹å¾‹ï¼ˆä¸€é—ªä¸€é—ªäº®æ™¶æ™¶ï¼‰ï¼š(éŸ³ç¬¦, èŠ‚æ‹)
# # SONG = [
# #     ('C4', 1), ('C4', 1), ('G4', 1), ('G4', 1),
# #     ('A4', 1), ('A4', 1), ('G4', 2),
# #     ('F4', 1), ('F4', 1), ('E4', 1), ('E4', 1),
# #     ('D4', 1), ('D4', 1), ('C4', 2),
# # ]



# # æ­Œæ›²æ—‹å¾‹ï¼ˆä¸¤åªè€è™ï¼‰ï¼š(éŸ³ç¬¦, èŠ‚æ‹)
# SONG = [
#     # ç¬¬ä¸€æ®µ
#     ('C4', 1), ('D4', 1), ('E4', 1), ('C4', 1),
#     ('C4', 1), ('D4', 1), ('E4', 1), ('C4', 1),
#     ('E4', 1), ('F4', 1), ('G4', 2),
#     ('E4', 1), ('F4', 1), ('G4', 2),
#     # ç¬¬äºŒæ®µ
#     ('G4', 0.5), ('A4', 0.5), ('G4', 0.5), ('F4', 0.5),
#     ('E4', 1), ('C4', 1),
#     ('G4', 0.5), ('A4', 0.5), ('G4', 0.5), ('F4', 0.5),
#     ('E4', 1), ('C4', 1),
#     # ç¬¬ä¸‰æ®µï¼ˆç»“å°¾ï¼‰
#     ('D4', 1), ('G4', 1), ('C4', 2),
#     ('D4', 1), ('G4', 1), ('C4', 2),
# ]


# # æ­Œæ›²é€Ÿåº¦ï¼šæ¯æ‹æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰
# BEAT_DURATION = 0.4

# # ----- æ ¸å¿ƒæ’­æ”¾å‡½æ•°-----
# def play_note(note, duration_beats):
#     """æ’­æ”¾å•ä¸ªéŸ³ç¬¦ï¼ŒåŒ…å«PWMé¢‘ç‡è®¾ç½®ä¸æŒç»­æ—¶é—´æ§åˆ¶"""
#     print(f"Playing note: {note}, for {duration_beats} beats")
#     frequency = NOTES.get(note, 0)
    
#     if frequency > 0:
#         buzzer.freq(frequency)  # ç›´æ¥è°ƒç”¨PWMçš„freqæ–¹æ³•
#         buzzer.duty_u16(32768)  # 50%å ç©ºæ¯”ï¼ˆæ§åˆ¶éŸ³é‡ï¼‰
    
#     utime.sleep(duration_beats * BEAT_DURATION)
    
#     buzzer.duty_u16(0)  # åœæ­¢å‘å£°
#     utime.sleep(0.05)  # éŸ³ç¬¦é—´éš” 

# # ----- ä¸»å¾ªç¯-----
# print("éŸ³ä¹æ’­æ”¾å™¨å·²å¯åŠ¨...")

# while True:
#     print("\n--- Playing 'Twinkle Twinkle Little Star' ---")
#     for note, beats in SONG:
#         play_note(note, beats)
    
#     print("--- Song Finished. Restarting in 2 seconds. ---")
#     utime.sleep(2)   













#ä»»åŠ¡å…«ï¼šå¤šé¦–æ­Œæ›²é€‰æ‹©æ’­æ”¾
from machine import Pin, PWM
import utime

# --------------------------------------------------
# èœ‚é¸£å™¨åˆå§‹åŒ–ï¼šé˜²æ­¢ä¸Šç”µ/å¯åŠ¨æ—¶å‘å‡ºæ‚éŸ³
# --------------------------------------------------
# å…ˆå°† GPIO15 è®¾ä¸ºæ™®é€šè¾“å‡ºæ¨¡å¼ï¼Œå¹¶å¼ºåˆ¶æ‹‰ä½ç”µå¹³
buzzer_pin = Pin(15, Pin.OUT)
buzzer_pin.value(0)          # ç¡®ä¿åˆå§‹ä¸ºä½ç”µå¹³
utime.sleep_ms(10)           # çŸ­æš‚å»¶æ—¶ï¼Œç¨³å®šç”µå¹³

# å†åˆ‡æ¢ä¸º PWM æ¨¡å¼ï¼Œç”¨äºæ§åˆ¶éŸ³é«˜å’Œå‘å£°
buzzer = PWM(buzzer_pin)
buzzer.freq(1000)            # åˆå§‹é¢‘ç‡è®¾ä¸º 1000Hzï¼ˆä»»æ„å€¼å‡å¯ï¼‰
buzzer.duty_u16(0)           # å ç©ºæ¯”ä¸º 0 â†’ å®Œå…¨é™éŸ³ï¼

# --------------------------------------------------
# éŸ³ç¬¦å®šä¹‰ï¼šéŸ³å -> é¢‘ç‡ï¼ˆHzï¼‰
# C4 ä¸ºä¸­å¤® Doï¼ŒA4 = 440Hz ä¸ºæ ‡å‡†éŸ³
# --------------------------------------------------
NOTES = {
    'C4': 262, 'D4': 294, 'E4': 330, 'F4': 349,
    'G4': 392, 'A4': 440, 'B4': 494, 'C5': 523,
    'REST': 0   # ä¼‘æ­¢ç¬¦ï¼ˆä¸å‘å£°ï¼‰
}

# æ¯æ‹æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¯è°ƒèŠ‚æ­Œæ›²é€Ÿåº¦
BEAT_DURATION = 0.4

# --------------------------------------------------
# æ’­æ”¾å•ä¸ªéŸ³ç¬¦çš„å‡½æ•°
# å‚æ•°ï¼š
#   note: éŸ³ç¬¦åç§°ï¼Œå¦‚ 'C4'
#   duration_beats: æŒç»­å‡ æ‹ï¼ˆ1 = ä¸€æ‹ï¼Œ0.5 = åŠæ‹ï¼‰
# --------------------------------------------------
def play_note(note, duration_beats):
    # ä»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”é¢‘ç‡ï¼Œæ‰¾ä¸åˆ°åˆ™é»˜è®¤ä¸º 0ï¼ˆé™éŸ³ï¼‰
    frequency = NOTES.get(note, 0)
    
    if frequency > 0:
        # è®¾ç½® PWM é¢‘ç‡ï¼ˆå†³å®šéŸ³é«˜ï¼‰
        buzzer.freq(frequency)
        # è®¾ç½®å ç©ºæ¯”ä¸º 50%ï¼ˆ32768 / 65535 â‰ˆ 0.5ï¼‰ï¼ŒéŸ³é‡æœ€å¤§
        buzzer.duty_u16(32768)
    else:
        # ä¼‘æ­¢ç¬¦ï¼šå…³é—­å£°éŸ³
        buzzer.duty_u16(0)
    
    # æŒ‰èŠ‚æ‹æŒç»­å‘å£°
    utime.sleep(duration_beats * BEAT_DURATION)
    
    # éŸ³ç¬¦ç»“æŸåç«‹å³é™éŸ³ï¼Œé¿å…æ‹–å°¾
    buzzer.duty_u16(0)
    # éŸ³ç¬¦é—´åŠ ä¸€ç‚¹é—´éš”ï¼Œè®©æ—‹å¾‹æ›´æ¸…æ™°
    utime.sleep(0.05)

# --------------------------------------------------
# æ’­æ”¾æ•´é¦–æ­Œæ›²çš„å‡½æ•°
# å‚æ•°ï¼š
#   song_name: æ­Œæ›²åç§°ï¼ˆç”¨äºæ‰“å°æç¤ºï¼‰
#   song_data: æ­Œæ›²æ•°æ®ï¼Œæ ¼å¼ä¸º [('C4', 1), ('D4', 0.5), ...]
# --------------------------------------------------
def play_song(song_name, song_data):
    print(f"\n--- ğŸµ æ­£åœ¨æ’­æ”¾: {song_name} ---")
    for note, beats in song_data:
        play_note(note, beats)
    print("--- æ’­æ”¾ç»“æŸ ---")

# --------------------------------------------------
# æ­Œæ›²åˆ—è¡¨ï¼šæ”¯æŒä»»æ„æ•°é‡çš„æ­Œæ›²
# æ¯é¦–æ­Œæ˜¯ä¸€ä¸ªå…ƒç»„ï¼š("æ­Œå", [ä¹è°±])
# å¯åœ¨æ­¤å¤„è½»æ¾æ·»åŠ æ–°æ­Œæ›²ï¼
# --------------------------------------------------
SONGS = [
    ("ä¸€é—ªä¸€é—ªäº®æ™¶æ™¶", [
        ('C4', 1), ('C4', 1), ('G4', 1), ('G4', 1),
        ('A4', 1), ('A4', 1), ('G4', 2),
        ('F4', 1), ('F4', 1), ('E4', 1), ('E4', 1),
        ('D4', 1), ('D4', 1), ('C4', 2),
    ]),
    ("ä¸¤åªè€è™", [
        ('C4', 1), ('D4', 1), ('E4', 1), ('C4', 1),
        ('C4', 1), ('D4', 1), ('E4', 1), ('C4', 1),
        ('E4', 1), ('F4', 1), ('G4', 2),
        ('E4', 1), ('F4', 1), ('G4', 2),
        ('G4', 0.5), ('A4', 0.5), ('G4', 0.5), ('F4', 0.5),
        ('E4', 1), ('C4', 1),
        ('G4', 0.5), ('A4', 0.5), ('G4', 0.5), ('F4', 0.5),
        ('E4', 1), ('C4', 1),
        ('D4', 1), ('G4', 1), ('C4', 2),
        ('D4', 1), ('G4', 1), ('C4', 2),
    ])
]

# --------------------------------------------------
# æŒ‰é’®åˆå§‹åŒ–ï¼ˆè¿æ¥åˆ° GPIO4ï¼‰
# ä½¿ç”¨å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ï¼ŒæŒ‰é’®æŒ‰ä¸‹æ—¶å¼•è„šä¸ºä½ç”µå¹³
# --------------------------------------------------
button = Pin(4, Pin.IN, Pin.PULL_UP)

# å½“å‰é€‰ä¸­çš„æ­Œæ›²ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰
current_index = 0

# --------------------------------------------------
# ä¸»ç¨‹åºå¼€å§‹
# --------------------------------------------------
print("ğŸ§ å•æŒ‰é’®ç‚¹æ­Œå°å·²å¯åŠ¨ï¼")
print("â€¢ çŸ­æŒ‰ (<1ç§’)ï¼šæ’­æ”¾å½“å‰æ­Œæ›²")
print("â€¢ é•¿æŒ‰ (â‰¥1ç§’)ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€é¦–")
print(f"â–¶ å½“å‰æ­Œæ›²: {SONGS[current_index][0]}")

# ä¸»å¾ªç¯
while True:
    # æ£€æµ‹æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹ï¼ˆä½ç”µå¹³è¡¨ç¤ºæŒ‰ä¸‹ï¼‰
    if not button.value():
        # è®°å½•æŒ‰ä¸‹å¼€å§‹æ—¶é—´
        press_start = utime.ticks_ms()
        
        # ç­‰å¾…ç”¨æˆ·æ¾å¼€æŒ‰é’®
        while not button.value():
            utime.sleep_ms(10)  # é¿å…å¿™ç­‰å¾…ï¼ŒèŠ‚çœèµ„æº
        
        # è®¡ç®—æŒ‰ä¸‹æŒç»­æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰
        press_duration = utime.ticks_diff(utime.ticks_ms(), press_start)
        
        if press_duration >= 1000:
            # é•¿æŒ‰ï¼ˆâ‰¥1ç§’ï¼‰ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€é¦–ï¼ˆå¾ªç¯ï¼‰
            current_index = (current_index + 1) % len(SONGS)
            print(f"\nâ­ï¸ å·²åˆ‡æ¢åˆ°: {SONGS[current_index][0]}")
        else:
            # çŸ­æŒ‰ï¼ˆ<1ç§’ï¼‰ï¼šæ’­æ”¾å½“å‰é€‰ä¸­çš„æ­Œæ›²
            name, data = SONGS[current_index]
            play_song(name, data)
    
    # ä¸»å¾ªç¯çŸ­å»¶æ—¶ï¼Œé™ä½ CPU å ç”¨
    utime.sleep_ms(50)
